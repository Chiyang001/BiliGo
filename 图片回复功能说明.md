# BiliGo 图片自动回复功能说明

## 功能概述

BiliGo 现已支持图片自动回复功能！您可以在默认回复和关键词规则中选择发送图片而不是文字消息。每个规则都可以独立设置回复类型（文字或图片）。

## 功能特点

- ✅ 支持多种图片格式：jpg、jpeg、png、gif、bmp、webp
- ✅ 可视化图片选择界面，支持文件夹浏览
- ✅ 默认回复和关键词规则都支持图片回复
- ✅ 跨平台兼容（Windows/Linux）
- ✅ 图片预览功能
- ✅ 智能路径处理

## 使用步骤

### 1. 准备图片文件
- 将您想要用于自动回复的图片保存到电脑上
- 支持的图片格式：`.jpg`、`.jpeg`、`.png`、`.gif`、`.bmp`、`.webp`
- 建议图片大小不超过20MB

### 2. 设置默认图片回复
1. 打开 BiliGo 管理界面
2. 找到"默认回复设置"面板
3. 勾选"启用默认回复"
4. 选择"图片回复"选项
5. 点击"选择图片"按钮
6. 在弹出的文件浏览器中选择您的图片
7. 点击"保存默认回复设置"

### 3. 设置关键词图片回复
1. 在"关键词回复设置"面板中
2. 填写规则标题和关键词
3. 选择"图片回复"选项
4. 点击"选择图片"按钮选择图片
5. 点击"添加规则"

### 4. 编辑现有规则
1. 在规则列表中点击"编辑"按钮
2. 可以修改回复类型（文字/图片）
3. 如果选择图片回复，重新选择图片文件
4. 保存修改

### 5. 启动监控
1. 确保已配置好登录信息（SESSDATA 和 bili_jct）
2. 点击"开始监控"按钮
3. 当有用户发送消息时，系统会根据规则发送对应的图片

## 图片浏览器使用

### 界面说明
- **当前路径**：显示当前浏览的文件夹路径
- **主目录按钮**：快速跳转到用户主目录
- **文件列表**：显示当前文件夹中的子文件夹和图片文件
- **文件信息**：显示图片的格式和大小

### 操作方法
1. **浏览文件夹**：点击文件夹图标进入子目录
2. **返回上级**：点击".."返回上级目录
3. **选择图片**：点击图片文件即可选择
4. **确认选择**：选择图片后会自动确认并关闭浏览器

## 工作原理

1. **消息检测**：系统检测到用户发送的私信
2. **规则匹配**：根据关键词匹配对应的回复规则
3. **回复类型判断**：
   - 如果规则设置为图片回复，发送指定的图片
   - 如果规则设置为文字回复，发送文字消息
   - 如果没有匹配规则但启用了默认回复，使用默认回复设置
4. **图片处理**：系统自动将图片上传到B站服务器
5. **发送回复**：将图片作为私信发送给用户

## 注意事项

### 文件夹要求
- 文件夹路径必须存在且可访问
- 文件夹中必须包含至少一张支持格式的图片
- 建议图片文件大小不超过20MB（B站限制）

### 图片要求
- 支持格式：jpg、jpeg、png、gif、bmp、webp
- 建议分辨率不要过大，以免影响发送速度
- 图片内容请遵守B站社区规范

### 性能考虑
- 图片上传需要时间，可能比文字回复稍慢
- 建议文件夹中不要放置过多图片（建议50张以内）
- 系统会自动控制发送频率，避免触发B站限制

## 故障排除

### 常见问题

**Q: 提示"文件夹不存在"**
A: 请检查路径是否正确，确保文件夹确实存在

**Q: 提示"文件夹中没有找到图片文件"**
A: 请确认文件夹中包含支持格式的图片文件

**Q: 图片发送失败**
A: 可能原因：
- 图片文件过大（超过20MB）
- 网络连接问题
- B站服务器限制
- 登录状态失效

**Q: 系统选择文字回复而不是图片回复**
A: 请检查：
- 是否勾选了"启用图片自动回复"
- 图片文件夹路径是否正确
- 文件夹中是否有可用的图片文件

### 日志查看
- 在"系统日志"面板中可以查看详细的运行日志
- 图片选择和发送过程都会有相应的日志记录
- 如遇问题，请查看日志中的错误信息

## 更新日志

### v1.1.0 (2025-01-28)
- ✅ 新增图片自动回复功能
- ✅ 支持多种图片格式
- ✅ 添加文件夹测试功能
- ✅ 优化用户界面
- ✅ 完善错误处理和日志记录

---

如有问题或建议，请联系开发者。